Array.indexOf||(Array.prototype.indexOf=function(i){for(var t=0;t<this.length;t++)if(this[t]==i)return t;return-1}),function(i){var t="",e={},n={init:function(n){t=i(this).html(),e=n;var a,o=i.extend({},i.fn.quizyMemoryGame.defaults,n),r=i(this).children("ul").children("li").length,m=new Array,l=new Array,s=new Array,d="quizy-mg-item",c="",u=-1,h=0,y=0,g=0,p=0,f=o.openDelay,v=o.itemWidth,q=o.itemHeight,z=o.itemsMargin,x=Math.ceil(r/o.colCount),w=o.randomised,b=function(){0==y&&(a=setInterval(I,1e3)),y++;var t=i(this).attr("id"),e=parseInt(t.substring(13,t.length)),n=l[e];S(i(this)),M(i(this),e),0==h?(h++,c=n,u=t):1==h&&(h=0,n==c?(k("correct"),S(i("."+n)),m.push(t),m.push(u),++g==r/2&&(clearInterval(a),o.gameSummary&&(i("div#quizy-game-summary").children("div#gs-column2").html(p+"<br>"+o.textSummaryTime),i("div#quizy-game-summary").children("div#gs-column3").html(y+"<br>"+o.textSummaryClicks),i("div#quizy-game-summary").delay(2e3).fadeIn(1e3)),""!=o.onFinishCall&&o.onFinishCall({clicks:y,time:p}))):(k("wrong"),S(i("div."+d)),T(i("div#"+u)),T(i(this)),setTimeout((function(){i("."+d).each((function(){var t=i(this).attr("id");-1==m.indexOf(t)&&C(i(this))}))}),f+o.animSpeed+250)))},S=function(i){i.unbind("click"),i.css("cursor","default")},C=function(i){i.bind("click",b),i.css("cursor","pointer")},M=function(t,e){var n=t.children("div.quizy-mg-item-top").attr("id");switch(o.animType){default:case"fade":A(t,e),i("#"+n).fadeOut(o.animSpeed);break;case"flip":t.flip({direction:o.flipAnim,speed:o.animSpeed,content:t.children("div.quizy-mg-item-bottom"),color:"#777",onEnd:function(){B(t,e)}});break;case"scroll":A(t,e),i("#"+n).animate({height:"toggle",opacity:.3},o.animSpeed)}},T=function(t){var e=t.children("div.quizy-mg-item-top").attr("id");switch(o.animType){default:case"fade":i("#"+e).delay(f).fadeIn(o.animSpeed,(function(){O(t)}));break;case"flip":setTimeout((function(){t.revertFlip()}),f),setTimeout((function(){O(t)}),f+4*o.animSpeed);break;case"scroll":i("#"+e).delay(f).animate({height:"toggle",opacity:1},o.animSpeed,(function(){O(t)}))}},k=function(t){if(o.resultIcons){var e,n=Math.round(f/3);"wrong"==t?e=i("div#quizy-mg-msgwrong"):"correct"==t&&(e=i("div#quizy-mg-msgcorrect")),e.delay(n).fadeIn(n/2).delay(n/2).hide("explode",n/2)}},I=function(){p++},A=function(i,t){i.children(".quizy-mg-item-bottom").children(".mgcard-show").html(s[t])},B=function(i,t){i.children(".mgcard-show").html(s[t])},O=function(i){i.children(".quizy-mg-item-bottom").children(".mgcard-show").html("")};if(i(this).children("ul").hide(),i(this).css({height:x*(q+z)+"px"}),w)for(var F=Array(),G=0;G<r;G++)s[G]="",F.push(G);G=0;for(var j=0;j<r;){if(w){var L=Math.floor(Math.random()*F.length);G=F[L],F.splice(L,1)}else G=j;var D=i(this).children("ul").children("li").eq(G),H=(j+o.colCount)%o.colCount*(v+z),Q=Math.floor(j/o.colCount)*(q+z);s[G]=D.html(),i(this).append('<div id="'+d+G+'" class="'+d+'" style="width:'+v+"px; height:"+q+"px; left:"+H+"px; top:"+Q+'px"><div class="quizy-mg-item-bottom"><div class="mgcard-show"></div></div><div id="quizy-mg-item-top'+G+'" class="quizy-mg-item-top" style="width:'+v+"px; height:"+q+'px;"></div></div>'),j++,l[G]=D.attr("class")}if(i(this).children("ul").remove(),o.resultIcons){i(this).append('<div id="quizy-mg-msgwrong" class="quizy-mg-notification-fly quizy-mg-notification-fly-neg"></div><div id="quizy-mg-msgcorrect" class="quizy-mg-notification-fly  quizy-mg-notification-fly-pos"></div>');var W=i(this).width()/2-i("div.quizy-mg-notification-fly").width()/2,E=i(this).height()/2-i("div.quizy-mg-notification-fly").height()/2-o.itemsMargin/2;i("div.quizy-mg-notification-fly").css({top:E+"px",left:W+"px"})}if(o.gameSummary){var R=i(this);R.append('<div id="quizy-game-summary"><div class="gs-column" id="gs-column1">'+o.textSummaryTitle+'</div><div class="gs-column" id="gs-column2"></div><div class="gs-column" id="gs-column3"></div><div class="quizy-game-clear"></div></div>');W=R.width()/2-i("div#quizy-game-summary").width()/2,E=R.height()/2-i("div#quizy-game-summary").height()/2-o.itemsMargin/2;i("div#quizy-game-summary").css({top:E+"px",left:W+"px"}),o.replayButton&&i("#quizy-game-summary").append('<div id="gs-replaybut">'+o.replayButtonText+"</div>"),i("#quizy-game-summary").append('<div id="gs-closebut">'+o.closeButtonText+"</div>"),i("div#gs-closebut").click((function(){i(this).parent().fadeOut()})),i("div#gs-replaybut").click((function(){R.quizyMemoryGame("restart")}))}i(".quizy-mg-item").click(b),""!=o.onLoadCall&&o.onLoadCall()},destroy:function(){i(this).empty()},restart:function(){n.destroy.apply(this),i(this).append(t),n.init.call(this,e)}};i.fn.quizyMemoryGame=function(t){return n[t]?n[t].apply(this,arguments):"object"!=typeof t&&t?void i.error("Method "+t+" does not exist on jQuery.tooltip"):n.init.apply(this,arguments)},i.fn.quizyMemoryGame.defaults={itemWidth:156,itemHeight:156,itemsMargin:10,colCount:4,animType:"scroll",animSpeed:250,openDelay:2500,flipAnim:"rl",resultIcons:!0,gameSummary:!0,randomised:!0,textSummaryTitle:"Your game summary",replayButton:!0,replayButtonText:"Replay",closeButtonText:"Close",textSummaryClicks:"clicks",textSummaryTime:"seconds",onFinishCall:"",onLoadCall:""}}(jQuery);
